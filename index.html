<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="zh-TW"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;title&gt;å€Ÿæ“šç°½ç½²å™¨&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.6/dist/signature_pad.umd.min.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>body { font-family: sans-serif; padding: 20px; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>input, canvas, button { display: block; margin: 10px 0; width: 100%; max-width: 400px; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>canvas { border: 1px solid #ccc; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>#download-link { display: none; margin-top: 20px; }</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;h1&gt;å€Ÿæ“šç°½ç½²å™¨&lt;/h1&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;!-- å®¢æœå¡«å¯«å€ --&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;section&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;h3&gt;å®¢æœå¡«å¯«ï¼šé‡‘é¡è³‡è¨Š&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;input type="text" id="amount_text" placeholder="å€Ÿæ¬¾é‡‘é¡ï¼ˆä¸­æ–‡ï¼Œä¾‹å¦‚ï¼šä¼è¬å…ƒæ•´ï¼‰"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;input type="text" id="amount_number" placeholder="å€Ÿæ¬¾é‡‘é¡ï¼ˆæ•¸å­—ï¼Œä¾‹å¦‚ï¼šNT$50000ï¼‰"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;button id="generate-staff-pdf"&gt;ç”¢å‡º PDF ä¸¦å‚³çµ¦å®¢æˆ¶&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;/section&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;!-- å®¢æˆ¶ç°½ç½²å€ --&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;section&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;h3&gt;å®¢æˆ¶ç°½ç½²&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;input type="file" id="uploaded-pdf" accept="application/pdf"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;input type="text" id="name" placeholder="å§“å"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;input type="text" id="idnumber" placeholder="èº«åˆ†è­‰è™Ÿç¢¼"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;input type="text" id="address" placeholder="ä½å€"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;input type="date" id="date"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;label&gt;ç°½åï¼š&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;canvas id="signature-pad" width="300" height="100"&gt;&lt;/canvas&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;button id="clear"&gt;æ¸…é™¤ç°½å&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;button id="generate-client-pdf"&gt;ç”¢å‡ºæœ€çµ‚ PDF ä¸¦å›å‚³&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;/section&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;a id="download-link"&gt;ğŸ“¥ ä¸‹è¼‰ PDF&lt;/a&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// å®¢æœç”Ÿæˆ PDF</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('generate-staff-pdf').onclick = async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const text = document.getElementById('amount_text').value;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const number = document.getElementById('amount_number').value;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!text || !number) return alert('è«‹è¼¸å…¥å®Œæ•´é‡‘é¡');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const pdfDoc = await PDFLib.PDFDocument.create();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const page = pdfDoc.addPage([595, 842]);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const font = await pdfDoc.embedFont(PDFLib.StandardFonts.Helvetica);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText('å€Ÿæ“š', { x: 260, y: 780, size: 18, font });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText(`ä¸€ã€èŒ²å€Ÿæ¬¾é‡‘é¡æ–°å°å¹£ï¼š${text}`, { x: 50, y: 720, size: 12, font });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText(`ä¸€ã€èŒ²å€Ÿæ¬¾é‡‘é¡æ–°å°å¹£ï¼š${number}`, { x: 50, y: 700, size: 12, font });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText(`äºŒã€è©²æ¬¾é …ç•¶å·²è¦ªæ”¶è¶³è¨–ç„¡è¨›ã€‚`, { x: 50, y: 680, size: 12, font });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText(`ä¸‰ã€åˆ°æœŸå€Ÿæ¬¾äººå³å°‡å€Ÿæ¬¾æœ¬é‡‘åŠåˆ©æ¯ä»¥åŠæ‡‰ä»˜ä¹‹ä¸€åˆ‡æ¬¾é …ä¸€ä½µæ¸…å„Ÿçµ•ä¸æ‹–å»¶ã€‚`, { x: 50, y: 660, size: 12, font });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText(`å››ã€ä¿è­‰äººé¡˜è² é€£å¸¶æ¸…å„Ÿè²¬ä»»åŠæ‹‹æ£„å…ˆè¨´æŠ—è¾¯æ¬Šã€‚`, { x: 50, y: 640, size: 12, font });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText(`äº”ã€æœ¬äººæ˜ç¢ºçŸ¥æ‚‰æœ¬å€Ÿæ¬¾ç‚ºé›™æ–¹åˆæ„è¨‚å®šï¼Œä¸¦éæ€¥è¿«è¼•ç‡ç„¡ç¶“é©—ï¼Œæˆ–å—åˆ°ä»»ä½•æš´ã€‚`, { x: 50, y: 620, size: 12, font });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText(`å…­ã€å”¯æèªªç„¡æ†‘ ç‰¹ç«‹æ­¤æ›¸`, { x: 50, y: 600, size: 12, font });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const pdfBytes = await pdfDoc.save();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const blob = new Blob([pdfBytes], { type: 'application/pdf' });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const urlBlob = URL.createObjectURL(blob);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const link = document.getElementById("download-link");</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>link.href = urlBlob;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>link.download = `å€Ÿæ“š_å®¢æœå¡«å¯«.pdf`;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>link.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>link.innerText = 'ğŸ“¥ ä¸‹è¼‰çµ¦å®¢æˆ¶ç”¨ PDF';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const signaturePad = new SignaturePad(document.getElementById("signature-pad"));</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById("clear").onclick = () =&gt; signaturePad.clear();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// å®¢æˆ¶ç°½ç½²å¾ŒåµŒå…¥ PDF</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById("generate-client-pdf").onclick = async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const file = document.getElementById('uploaded-pdf').files[0];</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!file || signaturePad.isEmpty()) return alert('è«‹ä¸Šå‚³ PDF ä¸¦å®Œæˆç°½å');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const name = document.getElementById('name').value;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const id = document.getElementById('idnumber').value;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const address = document.getElementById('address').value;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const date = document.getElementById('date').value;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!name || !id || !address || !date) return alert('è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const arrayBuffer = await file.arrayBuffer();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const page = pdfDoc.getPages()[0];</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const pngImage = await pdfDoc.embedPng(signaturePad.toDataURL());</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const font = await pdfDoc.embedFont(PDFLib.StandardFonts.Helvetica);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText(`å§“åï¼š${name}`, { x: 50, y: 350, size: 12, font });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText(`èº«åˆ†è­‰è™Ÿç¢¼ï¼š${id}`, { x: 50, y: 330, size: 12, font });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText(`ä½å€ï¼š${address}`, { x: 50, y: 310, size: 12, font });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawText(`æ—¥æœŸï¼š${date}`, { x: 50, y: 290, size: 12, font });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>page.drawImage(pngImage, { x: 300, y: 320, width: 150, height: 50 });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const pdfBytes = await pdfDoc.save();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const blob = new Blob([pdfBytes], { type: 'application/pdf' });</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const urlBlob = URL.createObjectURL(blob);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const link = document.getElementById("download-link");</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>link.href = urlBlob;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>link.download = `å€Ÿæ“š_å·²ç°½ç½².pdf`;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>link.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>link.innerText = 'ğŸ“¥ ä¸‹è¼‰ç°½ç½²å®Œæˆæª”æ¡ˆå¾Œå‚³å› LINE';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>};</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
